a = ones(1000, 1000, 1000);
video_name_file = "test" + ".avi";
videoExport = VideoWriter(video_name_file, 'Motion JPEG AVI'); 
videoExport.FrameRate = 200;

open(videoExport); 
tic

for i = 1:1000
    b = mat2gray(a(:, :, i));
%     parfeval(backgroundPool, @writeVideo, 0, videoExport, b);
    writeVideo(videoExport, b);
end
toc
close(videoExport)